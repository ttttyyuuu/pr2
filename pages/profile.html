<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - Aesthetic Setups</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome Icons via CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Pirata One Font -->
    <link href="https://fonts.googleapis.com/css2?family=Pirata+One&display=swap" rel="stylesheet">
    <!-- Funnel Font -->
    <link href="https://api.fontshare.com/v2/css?f[]=funnel@400,700&display=swap" rel="stylesheet">
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
    <link rel="icon" type="image/png" href="../images/favicon.png">
    <!-- Глобальный менеджер темы -->
    <script src="../js/theme.js"></script>
</head>
<body class="flex flex-col min-h-screen bg-[#E5CBE6]">
    <!-- Заголовок с навигацией -->
    <header class="bg-[#251725] text-[#E5CBE6] py-6 shadow-lg">
        <nav class="container mx-auto px-6 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <i class="fas fa-folder text-3xl text-[#E6C2DF] hover:text-[#E5CBE6] transition-colors"></i>
                <a href="../index.html" class="text-3xl font-['Pirata_One'] text-[#E6C2DF] hover:text-[#E5CBE6] transition-colors tracking-wider">Aesthetic Setups</a>
            </div>
            <div class="flex items-center space-x-8">
                <a href="../index.html" class="font-['Pirata_One'] text-xl hover:text-[#E6C2DF] transition-colors border-b-2 border-transparent hover:border-[#E6C2DF]">Home</a>
                <a href="login.html" class="font-['Pirata_One'] text-xl hover:text-[#E6C2DF] transition-colors border-b-2 border-transparent hover:border-[#E6C2DF]">Login</a>
                <a href="register.html" class="font-['Pirata_One'] text-xl hover:text-[#E6C2DF] transition-colors border-b-2 border-transparent hover:border-[#E6C2DF]">Register</a>
                <!-- Кнопка переключения темы (тёмный режим) -->
                <button id="darkModeToggle" class="text-xl hover:text-[#E6C2DF] transition-colors" aria-label="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- Основной контент страницы профиля -->
    <main class="flex-grow">
        <div class="container mx-auto px-6 py-16">
            <!-- Карточка профиля -->
            <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8">
                <!-- Заголовок профиля -->
                <div class="text-center mb-8">
                    <div class="w-32 h-32 mx-auto bg-[#E6C2DF] rounded-full flex items-center justify-center mb-4 shadow-lg">
                        <i class="fas fa-user text-6xl text-[#251725]"></i>
                    </div>
                    <h1 class="text-4xl font-['Pirata_One'] text-[#251725] mb-2" id="profileNameDisplay">Guest</h1>
                    <p class="font-['Funnel'] text-[#251725]" id="profileEmailDisplay">No email set</p>
                </div>

                <!-- Форма редактирования профиля -->
                <form id="profileForm" class="space-y-6">
                    <!-- Поле для имени пользователя -->
                    <div>
                        <label class="block font-['Funnel'] text-[#251725] mb-2" for="profileUsername">Username</label>
                        <input type="text" id="profileUsername" placeholder="Enter your username" 
                            class="w-full px-4 py-3 rounded-lg bg-[#E5CBE6] focus:outline-none focus:ring-2 focus:ring-[#E6C2DF] font-['Funnel'] text-[#251725]">
                    </div>

                    <!-- Поле для электронной почты -->
                    <div>
                        <label class="block font-['Funnel'] text-[#251725] mb-2" for="profileEmail">Email</label>
                        <input type="email" id="profileEmail" placeholder="Enter your email" 
                            class="w-full px-4 py-3 rounded-lg bg-[#E5CBE6] focus:outline-none focus:ring-2 focus:ring-[#E6C2DF] font-['Funnel'] text-[#251725]">
                    </div>

                    <!-- Поле для биографии -->
                    <div>
                        <label class="block font-['Funnel'] text-[#251725] mb-2" for="profileBio">Bio</label>
                        <textarea id="profileBio" placeholder="Tell us about your aesthetic setup preferences" 
                            class="w-full px-4 py-3 rounded-lg bg-[#E5CBE6] focus:outline-none focus:ring-2 focus:ring-[#E6C2DF] font-['Funnel'] text-[#251725] h-32"></textarea>
                    </div>

                    <!-- Кнопки действий -->
                    <div class="flex gap-4 pt-4">
                        <!-- Кнопка сохранения профиля -->
                        <button type="button" id="saveProfileBtn" 
                            class="flex-1 bg-[#251725] text-[#E5CBE6] py-3 rounded-lg font-['Pirata_One'] text-lg hover:bg-[#E6C2DF] hover:text-[#251725] transition-all duration-300 transform hover:scale-105">
                            Save Profile
                        </button>
                        <!-- Кнопка выхода из аккаунта -->
                        <button type="button" id="logoutBtn" 
                            class="flex-1 bg-red-500 text-white py-3 rounded-lg font-['Pirata_One'] text-lg hover:bg-red-600 transition-all duration-300 transform hover:scale-105">
                            Logout
                        </button>
                    </div>
                </form>

                <!-- Информация о присоединении -->
                <div class="mt-8 pt-8 border-t-2 border-[#E5CBE6]">
                    <p class="font-['Funnel'] text-[#251725] text-sm text-center">
                        Member since: <span id="memberSince" class="font-bold">Just now</span>
                    </p>
                </div>
            </div>
        </div>
    </main>

    <!-- Подвал сайта -->
    <footer class="bg-[#251725] text-[#E5CBE6] py-6 mt-auto">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-folder text-xl text-[#E6C2DF]"></i>
                    <span class="font-['Pirata_One']">Aesthetic Setups</span>
                </div>
                <div class="text-sm">
                    <p>&copy; 2025 Aesthetic Setups. All rights reserved.</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="hover:text-[#E6C2DF] transition-colors">
                        <i class="fab fa-instagram text-xl"></i>
                    </a>
                    <a href="#" class="hover:text-[#E6C2DF] transition-colors">
                        <i class="fab fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="hover:text-[#E6C2DF] transition-colors">
                        <i class="fab fa-discord text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Стили для тёмного режима (управляется глобальным theme.js) -->
    <style>
        /* Дополнительные стили для страницы профиля */
    </style>

    <!-- JavaScript для управления профилем -->
    <script>
        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            // Загрузка данных профиля из localStorage
            loadProfileData();
        });

        // Функция для загрузки данных профиля из localStorage
        function loadProfileData() {
            // Получаем сохраненные данные профиля или используем значения по умолчанию
            const userProfile = JSON.parse(localStorage.getItem('userProfile')) || {
                username: 'Guest',
                email: '',
                bio: '',
                favoriteStyle: '',
                joinDate: new Date().toLocaleDateString()
            };

            // Заполняем форму сохраненными данными
            document.getElementById('profileUsername').value = userProfile.username || '';
            document.getElementById('profileEmail').value = userProfile.email || '';
            document.getElementById('profileBio').value = userProfile.bio || '';
            document.getElementById('profileFavoriteStyle').value = userProfile.favoriteStyle || '';

            // Обновляем отображаемые данные профиля
            document.getElementById('profileNameDisplay').textContent = userProfile.username || 'Guest';
            document.getElementById('profileEmailDisplay').textContent = userProfile.email || 'No email set';
            document.getElementById('memberSince').textContent = userProfile.joinDate || 'Just now';
        }

        // Обработчик кнопки сохранения профиля
        document.getElementById('saveProfileBtn').addEventListener('click', () => {
            // Получаем значения из формы
            const username = document.getElementById('profileUsername').value || 'Guest';
            const email = document.getElementById('profileEmail').value;
            const bio = document.getElementById('profileBio').value;
            const favoriteStyle = document.getElementById('profileFavoriteStyle').value;

            // Проверяем валидность email если он введен
            if (email && !isValidEmail(email)) {
                alert('Please enter a valid email address');
                return;
            }

            // Создаем объект профиля с новыми данными
            const profile = {
                username: username,
                email: email,
                bio: bio,
                favoriteStyle: favoriteStyle,
                joinDate: localStorage.getItem('userProfile') ? 
                    JSON.parse(localStorage.getItem('userProfile')).joinDate : 
                    new Date().toLocaleDateString()
            };

            // Сохраняем профиль в localStorage
            localStorage.setItem('userProfile', JSON.stringify(profile));

            // Обновляем отображаемые данные
            document.getElementById('profileNameDisplay').textContent = username;
            document.getElementById('profileEmailDisplay').textContent = email || 'No email set';

            // Показываем сообщение об успехе
            alert('Profile saved successfully!');
        });

        // Обработчик кнопки выхода из аккаунта
        document.getElementById('logoutBtn').addEventListener('click', () => {
            // Запрашиваем подтверждение у пользователя
            if (confirm('Are you sure you want to logout?')) {
                // Удаляем данные профиля из localStorage
                localStorage.removeItem('userProfile');

                // Перенаправляем на главную страницу
                window.location.href = '../index.html';
            }
        });

        // Вспомогательная функция для проверки валидности email
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Обработчик отправки формы (предотвращаем стандартное поведение)
        document.getElementById('profileForm').addEventListener('submit', (e) => {
            e.preventDefault();
        });
    </script>
</body>
</html>
